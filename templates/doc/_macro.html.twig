{% macro caption(doc, limit = null) %}
    <a class="invisible_link" href="{{ path('doc.index', doc.getUrlParams) }}">
        {% if doc.isArchived %}
            <span class="text-muted">
        {% endif %}
            {% set label = doc.caption %}
            {% if limit %}{% set label = label|u.truncate(limit, '...') %}{% endif %}
            {{ label }}
            {{ badges(doc) }}
        {% if doc.isArchived %}
            </span>
        {% endif %}
    </a>
{% endmacro %}

{% macro badge(doc, withName = false, link = false) %}
    {% if link %}
        <a class="invisible_link" href="{{ path('doc.index', doc.getUrlParams) }}">
    {% endif %}
    {% if doc.isArchived %}
        <span class="text-muted">
    {% endif %}
            <i class="far fa-file-alt me-2"></i>
            {% import _self as this %}
            {{ doc.docId }}
            {% if withName %}
                - {{ doc.caption|u.truncate(100, '...') }}
            {% endif %}
            {{ badges(doc) }}
    {% if doc.isArchived %}
        </span>
    {% endif %}
    {% if link %}
        </a>
    {% endif %}
{% endmacro %}
