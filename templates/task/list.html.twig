{% extends 'base.html.twig' %}

{% block title %}{{ project.suffix }} - {{ 'Task_list'|trans }}{% endblock %}
{% block page_title %}  {% endblock %}
{% block page_subtitle %}{% endblock %}

{% block page_content %}
    {% embed '@AdminLTE/Widgets/box-widget.html.twig' %}
        {% import 'project/macro.html.twig' as mProject %}
        {% import 'task/macro.html.twig' as mTask %}

        {% block box_title %}
            {{ mProject.badge(project) }} - {{ 'Task_list'|trans }}
        {% endblock %}
        {% block box_body %}
{# @TODO починить отправку формы #}
{#            <nav class="navbar navbar-default">#}
{#                {{ form_start(filterForm, {'attr': {'class': 'autoupdate'}}) }}#}
{#                    <div class="col-md-2">#}
{#                        {{ form_widget(filterForm.addClosed) }}#}
{#                    </div>#}
{#                    <button type="submit">OK</button>#}
{#                {{ form_end(filterForm) }}#}
{#            </nav>#}
            <table class="table table-condensed">
                <tr>
                    <th>{{ knp_pagination_sortable(tasks, 'task.No'|trans, 't.no') }}</th>
                    <th>{{ knp_pagination_sortable(tasks, 'task.caption.label'|trans, 't.caption') }}</th>
                    <th>{{ knp_pagination_sortable(tasks, 'task.created.label'|trans, 't.createdAt') }}</th>
                    <th>{{ knp_pagination_sortable(tasks, 'task.updated.label'|trans, 't.updatedAt') }}</th>
                </tr>
                {%  for task in tasks %}
                    <tr>
                        <td>{{ mTask.no(task) }}</td>
                        <td>{{ mTask.caption(task, 160) }}</td>
                        <td>{{ task.createdAt|ago }}</td>
                        <td>{{ task.updatedAt|ago }}</td>{# localizeddate('medium', 'medium') #}
                    </tr>
                {% endfor %}
            </table>
            <hr>
            <nav class="center-block">
                {{ knp_pagination_render(tasks) }}
            </nav>
        {% endblock %}
    {% endembed %}
{% endblock %}