{% extends 'base_layout.html.twig' %}
{% import 'project/_macro.html.twig' as mProject %}

{% block title %}{{ project.name}}{% endblock %}
{% block page_title%}{% endblock %}
{% block page_subtitle %}{% endblock %}

{% block page_content %}
    <div class="row">
        <div class="col-md-10">
            {{ mProject.snippet(project, 0) }}
        </div>
        <div class="col-md-2">
            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
            {% embed '@AdminLTE/Widgets/box-widget.html.twig' %}
                {% block box_title %}
                    {{ 'ControlPanel'|trans }}
                {% endblock  %}
                {% block box_body %}
                    <div class="btn-group-vertical" role="toolbar" aria-label="{{ 'ControlPanel'|trans }}">
                        <div class="btn-group-vertical" role="group" aria-label="{{ 'Common'|trans }}">
                            {% if is_granted('PERM_TASK_CREATE') %}
                                <a class="btn btn-default btn-secondary" href="{{ path('task.project_create', {'suffix':project.suffix}) }}">{{ 'Create_task'|trans }}</a>
                            {% endif %}
                            {% if is_granted('PERM_DOC_CREATE') %}
                                <a class="btn btn-default btn-secondary" href="{{ path('doc.project_create', {'suffix':project.suffix}) }}">{{ 'Create_doc'|trans }}</a>
                            {% endif %}
                        </div>

                        <div class="btn-group-vertical" role="group" aria-label="{{ 'Maintenance'|trans }}">
                            {% if is_granted('PERM_PROJECT_SETTINGS') %}
                                <a class="btn btn-default btn-secondary" href="{{ path('project.edit', {'suffix':project.suffix}) }}">{{ 'Edit_project'|trans }}</a>
                            {% endif %}
                        </div>
                    </div>
                {% endblock %}
            {% endembed %}
            {% endif %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
        {% embed '@AdminLTE/Widgets/box-widget.html.twig' %}
            {% import 'task/_macro.html.twig' as mTask %}
            {% block box_title %}
                <a href="{{ path('task.list', {'suffix': project.suffix}) }}">{{ 'Tasks'|trans }}</a>
            {% endblock %}
            {% block box_body %}
                {{ mTask.table(tasks) }}
            {% endblock %}
        {% endembed %}
        </div>
        <div class="col-md-6">
            {% embed '@AdminLTE/Widgets/box-widget.html.twig' %}
                {% import 'doc/_macro.html.twig' as mDoc %}
                {% block box_title %}
                    <a href="{{ path('doc.list', {'suffix': project.suffix}) }}">{{ 'Docs'|trans }}</a>
                {% endblock %}
                {% block box_body %}
                    {{ mDoc.table(docs) }}
                {% endblock %}
            {% endembed %}
        </div>
    </div>
{% endblock %}